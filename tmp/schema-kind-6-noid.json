{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "kind6",
  "description": "Repost of a kind-1 note (NIP-18)",
  "allOf": [
    {
      "allOf": [
        {
          "$schema": "http://json-schema.org/draft-07/schema",
          "type": "object",
          "properties": {
            "content": {
              "type": "string",
              "errorMessage": "content must be a string",
              "description": "The content of the note"
            },
            "created_at": {
              "type": "integer",
              "errorMessage": "created_at must be a timestamp expressed in seconds (not milliseconds)",
              "description": "The timestamp of the note creation"
            },
            "id": {
              "allOf": [
                {
                  "allOf": [
                    {
                      "$schema": "http://json-schema.org/draft-07/schema#",
                      "type": "string",
                      "pattern": "^[a-f0-9]{64}$"
                    }
                  ]
                }
              ],
              "errorMessage": "id must be a valid hash",
              "description": "The id is a hash derived as specified in NIP-01"
            },
            "kind": {
              "type": "integer"
            },
            "pubkey": {
              "allOf": [
                {
                  "allOf": [
                    {
                      "$schema": "http://json-schema.org/draft-07/schema#",
                      "type": "string",
                      "pattern": "^[a-f0-9]{64}$"
                    }
                  ]
                }
              ],
              "errorMessage": "pubkey must be a secp256k1 public key",
              "description": "The public key of the note's author"
            },
            "sig": {
              "type": "string",
              "errorMessage": "sig must be a string",
              "description": "The cryprographic signature of the note"
            },
            "tags": {
              "type": "array",
              "errorMessage": "tags must be an array of strings",
              "description": "The tags of the note",
              "items": [
                {
                  "allOf": [
                    {
                      "$schema": "http://json-schema.org/draft-07/schema#",
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "uniqueItems": false
                    }
                  ]
                }
              ]
            }
          },
          "required": [
            "content",
            "created_at",
            "id",
            "kind",
            "pubkey",
            "sig",
            "tags"
          ]
        }
      ]
    },
    {
      "type": "object",
      "properties": {
        "kind": {
          "const": 6
        },
        "content": {
          "type": "string",
          "description": "Stringified JSON of the reposted note. MAY be empty (not recommended).\nFor NIP-70-protected events, content SHOULD be empty.\n"
        },
        "tags": {
          "type": "array",
          "items": {
            "allOf": [
              {
                "$schema": "http://json-schema.org/draft-07/schema#",
                "type": "array",
                "items": {
                  "type": "string"
                },
                "uniqueItems": false
              }
            ]
          },
          "minItems": 1,
          "allOf": [
            {
              "contains": {
                "type": "array",
                "minItems": 3,
                "items": [
                  {
                    "const": "e"
                  },
                  {
                    "type": "string",
                    "pattern": "^[a-f0-9]{64}$"
                  },
                  {
                    "type": "string",
                    "pattern": "^(ws://|wss://).+$"
                  }
                ]
              }
            }
          ],
          "errorMessage": {
            "contains": "tags must include an e tag with id and a relay URL"
          }
        }
      },
      "required": [
        "kind",
        "tags"
      ]
    }
  ]
}
